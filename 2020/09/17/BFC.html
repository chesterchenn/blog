<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>BFC | 主页</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="BFC" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="BFC(Block Formatting Context) 块级格式化上下文。它是块级布局发生的区域，也是浮动与其他元素交互的区域。" />
<meta property="og:description" content="BFC(Block Formatting Context) 块级格式化上下文。它是块级布局发生的区域，也是浮动与其他元素交互的区域。" />
<link rel="canonical" href="/blog/2020/09/17/BFC.html" />
<meta property="og:url" content="/blog/2020/09/17/BFC.html" />
<meta property="og:site_name" content="主页" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-09-17T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="BFC" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-09-17T00:00:00+00:00","datePublished":"2020-09-17T00:00:00+00:00","description":"BFC(Block Formatting Context) 块级格式化上下文。它是块级布局发生的区域，也是浮动与其他元素交互的区域。","headline":"BFC","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/2020/09/17/BFC.html"},"url":"/blog/2020/09/17/BFC.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/css/style.css">
  <link rel="icon" type="image/x-icon" href="/blog/assets/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" /><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="主页" />
    






  
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/blog/">主页</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/blog/about/">关于</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">BFC</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-09-17T00:00:00+00:00" itemprop="datePublished">Sep 17, 2020
      </time></p>
    <span>
      
        <!--  -->
        <span class="highligher-rouge"><a href="/blog/tag/2020"><i>2020</i></a></span>
      
        <!--  -->
        <span class="highligher-rouge"><a href="/blog/tag/css"><i>css</i></a></span>
      
    </span>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>BFC(Block Formatting Context) 块级格式化上下文。它是块级布局发生的区域，也是浮动与其他元素交互的区域。</p>

<p>具有 BFC 特性的元素可以看作是隔离了的独立容器，容器里面的元素不会在布局上影响到外面的元素，并且 BFC 具有普通容器所没有的一些特性。即 BFC 为一个独立的区域，内部元素不管怎么变化，都不影响外部元素。</p>

<h2 id="渲染规则">渲染规则</h2>

<p>BFC 有一套属于自己的渲染规则：</p>

<ul>
  <li>内部的盒子会在垂直方向上一个接一个地放置</li>
  <li>同一个 BFC 的两个相邻的盒子 margin 会发生重叠</li>
  <li>每个元素的左边距会与包含块的左边距相接触</li>
  <li>BFC 的区域不会与 float 元素区域重叠</li>
  <li>计算 BFC 的高度时，浮动子元素也参与计算</li>
  <li>BFC 就是页面上一个隔离的独立容器，里面子元素不会影响到外面的元素</li>
</ul>

<h2 id="触发-bfc">触发 BFC</h2>

<p>只要元素满足任一条件就可以触发 BFC</p>

<ul>
  <li>文档根元素 <code class="language-plaintext highlighter-rouge">&lt;html&gt;</code></li>
  <li>浮动（除 <code class="language-plaintext highlighter-rouge">float: none</code> 以外）</li>
  <li>绝对定位元素（postion 是 <code class="language-plaintext highlighter-rouge">absolute</code> 或 <code class="language-plaintext highlighter-rouge">fixed</code>）</li>
  <li>行内块元素（display 为 <code class="language-plaintext highlighter-rouge">inline-block</code>）</li>
  <li>overflow （除 <code class="language-plaintext highlighter-rouge">visible</code> 和 <code class="language-plaintext highlighter-rouge">clip</code> 以外）</li>
  <li><code class="language-plaintext highlighter-rouge">display: flow-root</code></li>
  <li>Flex 项（display 为 <code class="language-plaintext highlighter-rouge">flex</code> 或 <code class="language-plaintext highlighter-rouge">inline-flex</code>）</li>
  <li>栅格项（display 为 <code class="language-plaintext highlighter-rouge">grid</code> 或 <code class="language-plaintext highlighter-rouge">inline-grid</code>）</li>
</ul>

<h2 id="主要作用">主要作用</h2>

<p>通常情况下，会为布局和清除浮动创建一个新的 BFC，而非改变布局，因为创建一个新的 BFC 的元素会：</p>

<ul>
  <li>包含内部浮动</li>
  <li>排除外部浮动</li>
  <li>防止边距叠加</li>
</ul>

<h3 id="包含内部浮动">包含内部浮动</h3>

<p>让浮动内容和旁边的内容高度相同。在下面例子中，浮动元素脱离文档流，所以容器不能撑起浮动元素的高度。</p>

<section>
  <div class="box">
    <div class="float">浮动元素</div>
    <div>容器内的文段</div>
  </div>
</section>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"float"</span><span class="nt">&gt;</span>浮动元素<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div&gt;</span>容器内的文段<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">section</span> <span class="p">{</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.box</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">224</span><span class="p">,</span> <span class="m">206</span><span class="p">,</span> <span class="m">247</span><span class="p">);</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">5px</span> <span class="nb">solid</span> <span class="n">rebeccapurple</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.box</span><span class="o">[</span><span class="nt">style</span><span class="o">]</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="no">aliceblue</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">5px</span> <span class="nb">solid</span> <span class="no">steelblue</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.float</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">255</span><span class="p">,</span> <span class="m">0.5</span><span class="p">);</span>
  <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
  <span class="nl">padding</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<style>
section {
  height:150px;
}
.box {
  background-color: rgb(224, 206, 247);
  border: 5px solid rebeccapurple;
}
.box[style] {
  background-color: aliceblue;
  border: 5px solid steelblue;
}
.float {
  float: left;
  width: 200px;
  height: 100px;
  background-color: rgba(255, 255, 255, .5);
  border:1px solid black;
  padding: 10px;
}
</style>

<p>根据上面设置 BFC 的方式，选择两种方式：</p>

<ul>
  <li>设置 <code class="language-plaintext highlighter-rouge">overflow: auto</code> 新建一个包含浮动 BFC 的容器。</li>
  <li>设置 <code class="language-plaintext highlighter-rouge">display: flow-root</code> 创建一个新的 BFC 且没有副作用。</li>
</ul>

<section>
  <div class="box" style="overflow:auto">
    <div class="float">浮动元素</div>
    <div>容器设置了<code>overflow:auto</code>的文段</div>
  </div>
</section>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span> <span class="na">style=</span><span class="s">"overflow:auto"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"float"</span><span class="nt">&gt;</span>浮动元素<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div&gt;</span>容器设置了<span class="nt">&lt;code&gt;</span>overflow:auto<span class="nt">&lt;/code&gt;</span>的文段<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>

<span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span> <span class="na">style=</span><span class="s">"display:flow-root"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"float"</span><span class="nt">&gt;</span>浮动元素<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div&gt;</span>容器设置了<span class="nt">&lt;code&gt;</span>display:flow-root<span class="nt">&lt;/code&gt;</span>的文段<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<h3 id="排除外部浮动">排除外部浮动</h3>

<p>我们可以一个实例</p>

<section>
  <div>
    <div class="float">浮动元素</div>
    <div class="box">文本</div>
  </div>
</section>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"float"</span><span class="nt">&gt;</span>浮动元素<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span><span class="nt">&gt;</span>文本<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<p>给需要排除外部浮动的元素设置 <code class="language-plaintext highlighter-rouge">display: flow-root</code>，使其成为一个 BFC。</p>

<section>
  <div>
    <div class="float">浮动元素</div>
    <div class="box" style="display: flow-root;">盒子设置了 display: flow-root</div>
  </div>
</section>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"float"</span><span class="nt">&gt;</span>浮动元素<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box"</span> <span class="na">style=</span><span class="s">"display: flow-root;"</span><span class="nt">&gt;</span>盒子设置了 display: flow-root<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre></div></div>

<h3 id="边距重叠">边距重叠</h3>

<p>同一个 BFC 下外边距会发生折叠，创建一个新的 BFC 以避免两个相邻 div 之间的边距崩溃。下面例子中，创建一个新的 div，并设置 <code class="language-plaintext highlighter-rouge">overflow: auto;</code> 使其成为一个新的 BFC。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"border: 1px solid #888"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 50px; margin: 10px; background: #DDA0DD;"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 50px; margin: 10px; background: #14CC8D;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div style="border: 1px solid #888">
  <div style="height: 50px; margin: 10px; background: #DDA0DD;"></div>
  <div style="height: 50px; margin: 10px; background: #14CC8D;"></div>
</div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"border: 1px solid #888"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 50px; margin: 10px; background: #DDA0DD;"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"overflow: auto;"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"height: 50px; margin: 10px; background: #14CC8D;"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<div style="border: 1px solid #888">
  <div style="height: 50px; margin: 10px; background: #DDA0DD;"></div>
  <div style="overflow: auto;">
    <div style="height: 50px; margin: 10px; background: #14CC8D;"></div>
  </div>
</div>

<h2 id="相关的问题">相关的问题</h2>

<h3 id="1-wrap-的高度">1. wrap 的高度</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
  <span class="nc">.a</span><span class="o">,</span>
  <span class="nc">.b</span><span class="o">,</span>
  <span class="nc">.c</span> <span class="p">{</span>
    <span class="nl">box-sizing</span><span class="p">:</span> <span class="n">border-box</span><span class="p">;</span>
    <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.wrap</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">250px</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="m">#ccddee</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.a</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="n">rebeccapurple</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.b</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">50px</span><span class="p">;</span>
    <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">aliceblue</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.c</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
    <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="m">#3388ee</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"a"</span><span class="nt">&gt;</span>a<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"b"</span><span class="nt">&gt;</span>b<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"c"</span><span class="nt">&gt;</span>c<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<style type="text/css">
  .a, .b, .c {
    box-sizing: border-box;
    border: 1px solid;
    width: 100px;
  }
  .wrap {
    width: 250px;
    background: #ccddee;
  }
  .a {
    height: 100px;
    float: left;
    background: rebeccapurple;
  }
  .b {
    height: 50px;
    float: left;
    background: aliceblue;
  }
  .c {
    height: 100px;
    display: inline-block;
    background: #3388ee;
  }
</style>

<p>如果 c 没有 <code class="language-plaintext highlighter-rouge">display: inline-block;</code>，那么 a 将和 c 重叠，虽然文本让出位置，也就是 c 会出现在 a 的下边界下方，但是容器的高度就是 c 的高度 100px。</p>

<p>设置了 <code class="language-plaintext highlighter-rouge">display: inline-block;</code> 使得 c 内部形成了 BFC，BFC 不与 float 元素重叠，即 BFC 排除外部浮动。同时 wrap 的宽度限制 250px。所以 c 出现在紧贴着 a 的右边界以及 b 的下边界的位置出现。</p>

<div class="wrap">
  <div class="a">a</div>
  <div class="b">b</div>
  <div class="c">c</div>
</div>

<h2 id="参考链接">参考链接</h2>

<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Block_formatting_context">MDN: Block formatting context</a></li>
  <li><a href="https://m.nowcoder.com/questions?uuid=cdaa9b301f1c46e686c5a87650d79525">wrap 的高度是多少</a></li>
</ul>

  </div><a class="u-url" href="/blog/2020/09/17/BFC.html" hidden></a>
</article>

      </div>
    </main>

    <div class="top">
      <div class="top__tri"></div>
    </div><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>
  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col one-half">
      <h2 class="footer-heading">结尾处</h2>
        <ul class="contact-list">
          <li class="p-name"></li><li><a class="u-email" href="mailto:chesterchenn@outlook.com">chesterchenn@outlook.com</a></li><li>
              <a href="/blog/feed.xml">
                <svg class="svg-icon orange">
                  <use xlink:href="/blog/assets/minima-social-icons.svg#rss"></use>
                </svg><span>Subscribe</span>
              </a>
            </li>
        </ul>
      </div>

      <div class="footer-col one-half">
        <p>看自己超过两周之前写的代码就跟之前没看过一样。</p>
      </div>

      <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/chesterchenn" title="chesterchenn"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a href="https://twitter.com/chesterchenn" title="chesterchenn"><svg class="svg-icon grey"><use xlink:href="/blog/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>
    </div>
  </div>
</footer>
<script src="/blog/assets/js/top.js"></script>

  </body>

</html>
