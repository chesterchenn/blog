---
layout: post
tags: 2023 css
title: 全局使用 Sass 文件
---

一些基础配置的 sass 文件，如: `_base.scss` 或 `_variables.scss` 经常会在其他文件引用，那么就需要全局使用 sass 文件。

## Webpack

全局使用 sass 文件，主要是修改 webpack 中的 sass-loader 的配置中的 additionalData 配置。

```js
module.exports = {
  module: {
    rules: [
      {
        test: /\.s[ac]ss$/i,
        use: [
          'style-loader',
          'css-loader',
          {
            loader: 'sass-loader',
            options: {
              additionalData: '$env: ' + process.env.NODE_ENV + ';',
            },
          },
        ],
      },
    ],
  },
};
```

假设我们有一个 sass 文件 `sass/_variables.scss`

```js
const themeColor = path.resolve(__dirname, 'sass', '_variables.scss');

// 使用 @import
{
  loader: 'sass-loader',
  options: {
    additionalData: `additionalData: @import "../src/sass/_variables.scss";`,
  }
}

// 使用 @use，并可以直接使用
{
  loader: 'sass-loader',
  options: {
    additionalData: `additionalData: @use "../src/sass/_variables.scss"; as *`,
  }
}

// 使用 @use，并作为变量 variables
{
  loader: 'sass-loader',
  options: {
    `additionalData: @use "${themeColor}"; as variables`,
  }
}
```

## 参考链接

- [webpack-contrib/sass-loader: Compiles Sass to CSS](https://github.com/webpack-contrib/sass-loader)
- [@use rules must be written before any other rules 报错 xunloveo 的博客-CSDN 博客](https://blog.csdn.net/xunloveo/article/details/119598288)
