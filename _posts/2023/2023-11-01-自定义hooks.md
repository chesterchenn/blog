---
layout: post
tags: 2023 react
title: è‡ªå®šä¹‰ Hooks
---

è‡ªå®šä¹‰ Hooks æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ use å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksã€‚é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚

<!-- vim-markdown-toc GFM -->

- [ç»„ä»¶é—´å…±äº«é€»è¾‘](#ç»„ä»¶é—´å…±äº«é€»è¾‘)
- [ä½•æ—¶è‡ªå®šä¹‰ Hooks](#ä½•æ—¶è‡ªå®šä¹‰-hooks)
- [è‡ªå®šä¹‰ Hooks ä¸æ™®é€šå‡½æ•°åŒºåˆ«](#è‡ªå®šä¹‰-hooks-ä¸æ™®é€šå‡½æ•°åŒºåˆ«)
- [å‚è€ƒé“¾æ¥](#å‚è€ƒé“¾æ¥)

<!-- vim-markdown-toc -->

## ç»„ä»¶é—´å…±äº«é€»è¾‘

ä½¿ç”¨è‡ªå®šä¹‰ Hooks æœ€å¤§ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¯ä»¥å…±äº«ç»„ä»¶ä¹‹é—´çš„é€»è¾‘ã€‚

ä»¥ [react-use](https://github.com/streamich/react-use) é‡Œé¢çš„ `useLocalStorage` ä½œä¸ºä¾‹å­ã€‚

`useLocalStorage` é‡Œé¢å°è£…ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…æ‹¬å¯¹å¼‚å¸¸å¤„ç†ï¼Œè¯»å–ï¼Œæ›´æ–°ä»¥åŠåˆ é™¤ç­‰æ“ä½œã€‚è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å°±å¯ä»¥ä¸ç”¨é‡å¤ç¼–ç ã€‚

```jsx
import { useLocalStorage } from 'react-use';

const Demo = () => {
  const [value, setValue, remove] = useLocalStorage('my-key', 'foo');

  return (
    <div>
      <div>Value: {value}</div>
      <button onClick={() => setValue('bar')}>bar</button>
      <button onClick={() => setValue('baz')}>baz</button>
      <button onClick={() => remove()}>Remove</button>
    </div>
  );
};
```

## ä½•æ—¶è‡ªå®šä¹‰ Hooks

hook æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹äºå¸¸ç”¨çš„ç»„ä»¶ä¼šç»å¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™æŠ½å– Hooksï¼Ÿä»€ä¹ˆæ—¶å€™æŠ½å– utilsï¼Ÿ

æ¥è‡ª React å®˜æ–¹æ–‡æ¡£ä¸€ä¸ªå¾ˆç®€æ˜“çš„æ ‡å‡†ï¼Œå°±æ˜¯å¦‚æœä½ çš„å‡½æ•°è°ƒç”¨äº†å…¶ä»– Hooksï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æ˜¯ä¸€ä¸ªä»¥ `use` å¼€å¤´çš„ Hooksã€‚

ä¸€ä¸ªåº”è¯¥æ”¾åœ¨ utils ä¸‹çš„æ™®é€šå‡½æ•°ï¼š

```js
// ğŸ”´ Avoid: A Hook that doesn't use Hooks
function useSorted(items) {
  return items.slice().sort();
}

// âœ… Good: A regular function that doesn't use Hooks
function getSorted(items) {
  return items.slice().sort();
}
```

è€Œä¸€ä¸ªç†åº”å‘½å use çš„ Hook:

```js
// âœ… Good: A Hook that uses other Hooks
function useAuth() {
  return useContext(Auth);
}
```

## è‡ªå®šä¹‰ Hooks ä¸æ™®é€šå‡½æ•°åŒºåˆ«

æ ¹æ®ä¸Šé¢çš„å†…å®¹ï¼Œå¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼š

1. Hooks å†™åœ¨ç»„ä»¶é¡¶éƒ¨ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ï¼Œæ™®é€šå‡½æ•°éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚
2. Hooks åªèƒ½åœ¨ React ç»„ä»¶é‡Œé¢ä½¿ç”¨ï¼Œæ™®é€šå‡½æ•°å¯ä»¥åœ¨å…¶ä»–æ™®é€šå‡½æ•°é‡Œé¢è°ƒç”¨ã€‚
3. Hooks ä¸­å¯ä»¥è°ƒç”¨å…¶ä»– hookï¼Œå¦‚ useEffect, useStateï¼Œæ™®é€šå‡½æ•°ä¸å¯ä»¥å¤„ç† Hooks é€»è¾‘ã€‚
4. Hooks çº¦å®šä½¿ç”¨ use å¼€å¤´å‘½åï¼Œä½¿ç”¨ use å¼€å¤´å¯ä»¥è®© React è¯†åˆ«å‡º hookï¼Œä»è€Œæ£€æŸ¥ Hooks çš„è§„åˆ™çº¦æŸã€‚

## å‚è€ƒé“¾æ¥

- [react hook -- è‡ªå®šä¹‰ Hook](https://www.jianshu.com/p/cc58fc005070)
- [reactjs - react custom hooks vs normal functions, what is the difference - Stack Overflow](https://stackoverflow.com/questions/60133412/react-custom-hooks-vs-normal-functions-what-is-the-difference)
- [è‡ªå®šä¹‰ hooks å’Œæ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/491311403)
- [react.dev/learn/reusing-logic-with-custom-hooks](https://react.dev/learn/reusing-logic-with-custom-hooks)
- [streamich/react-use: React Hooks â€” ğŸ‘](https://github.com/streamich/react-use)
