---
title: JS小记
tags: JavaScript
---
一些记录 JavaScript 的东西。  

## 函数默认参数
```
ES5:
function func(arg) {
  arg = (typeof arg !== 'undefined') ? arg : defaultValue
}
ES6:
function func(arg = defaultValue) {}
```

## 取整小记
因为JavaScript里面都是浮点数，所以有时候运算操作需要取整操作
- 四舍五入 `Math.round()`
- 向上取整 `Math.ceil()`
- 向下取整 `Math.floor()`
- 向下取整 `~~` (参见常用位运算)
- 向下取整 `parseInt()` (可以用来取整，但定义是解析字符串，返回整数 [详见](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt))

## 常用的位运算
```
const VAL  = '3.1415'
var string = '' + VAL  // to String
var int    = ~~VAL     // to integer
var float  = 1*VAL     // to float
var bool   = !!VAL     // to boolean
var array  = [VAL]     // to array
```

## 变量存储方式-栈(stack)和堆(heap)
栈：自动分配内存空间，系统自动释放，里面存放的是基本类型的值和引用类型的地址  
堆：动态分配内存，大小不定，不会自动释放，里面存放的引用类型的值  
![Image](../../../images/stack.png)  

## Array.includes处理多重条件
```
function func(arg) {
  if (arg === 'A' || arg === 'B' || arg === 'C') { /* do something */ }
}

function func(arg) {
  const arr = ['A', 'B', 'C'];
  if (arr.includes(arg)) { /* do something */ }
}
```

## Array.every和Array.some处理全部/部分满足条件
```
const arr = [
  { name: 'AA', age: 10 },
  { name: 'BB', age: 20 },
  { name: 'CC', age: 30 }
]

// 满足全部条件
const bool = arr.every(item => item.name === 'AA');

// 满足部分条件
const bool = arr.some(item => item.age < 35);
``` 

## 位移操作符
JavaScript 的 `Number` 类型是遵循IEEE 754标准二进制浮点数算法的 64 位双精度。但所有的位移操作符是在 32 位操作数上执行的，所以在执行位移操作符的时候，JavaScript 会将操作数转化成 32 位的有符号序列。  

| 运算符 | 用法 | 描述 |
|----|----|----|
|AND(与)  | `a & b` | 对于每一个比特位，只有两个操作数相应的比特位都是1时，结果才为1，否则为0。|
|OR(或)   | `a \| b` | 对于每一个比特位，当两个操作数相应的比特位至少有一个1时，结果为1，否则为0。|
|XOR(异或)| `a ^ b` | 对于每一个比特位，当两个操作数相应的比特位有且只有一个1时，结果为1，否则为0。|
|NOR(非)  | ` ~a `  | 反转操作数的比特位，即0变成1，1变成0。|
|左移     | `a << b`| 将 a 的二进制形式向左移 b (< 32) 比特位，右边用0填充。|
|有符号右移| `a >> b`| 将 a 的二进制表示向右移 b (< 32) 位，丢弃被移出的位。|
|无符号右移|`a >>> b`| 将 a 的二进制表示向右移 b (< 32) 位，丢弃被移出的位，并使用 0 在左侧填充。|
  
表格来源: [MDN Bitwise operators](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators)

