---
tags: algorithm
title: 设计模式之工厂模式
---
一般情况下，工厂模式可以分为：简单工厂，工厂方法和抽象工厂。而简单工厂、工厂方法原理比较简单，在实际项目中也比较常用。

#### 简单工厂
简单工厂（Simple Factory），为了让类的职责更加单一、代码更加清晰，我们还可以将函数剥离到一个独立的类中，让这个类只负责对象的对应单一职责。而这个类就是我们现在要讲的简单工厂模式类。

#### 工厂方法
工厂方法（Factory Method），工厂方法比起简单工厂更加符合开闭原则。  

我们之所以将某个代码块剥离出来，独立为函数或者类，原因是这个代码块的逻辑过于复杂，剥离之后能让代码更加清晰，更加可读、可维护。但是，如果代码块本身并不复杂，就几行代码而已，我们完全没必要将它拆分成单独的函数或者类。  

基于这个设计思想，当对象的创建逻辑比较复杂，不只是简单的 new 一下就可以，而是要组合其他类对象，做各种初始化操作的时候，我们推荐使用工厂方法模式，将复杂的创建逻辑拆分到多个工厂类中，让每个工厂类都不至于过于复杂。而使用简单工厂模式，将所有的创建逻辑都放到一个工厂类中，会导致这个工厂类变得很复杂。

#### 使用工厂模式的情况
当创建逻辑比较复杂，我们就考虑使用工厂模式，封装对象的创建过程，将对象的创建和使用相分离。何为创建逻辑比较复杂呢？下面两种情况：

- 第一种情况：类似规则配置解析的例子，代码中存在 if-else 分支判断，动态地根据不同的类型创建不同的对象。针对这种情况，我们就考虑使用工厂模式，将这一大坨 if-else 创建对象的代码抽离出来，放到工厂类中。

- 还有一种情况，尽管我们不需要根据不同的类型创建不同的对象，但是，单个对象本身的创建过程比较复杂，比如前面提到的要组合其他类对象，做各种初始化操作。在这种情况下，我们也可以考虑使用工厂模式，将对象的创建过程封装到工厂类中。

## 参考链接
- [极客时间：设计模式之美-工厂模式（上）](https://time.geekbang.org/column/article/197254)