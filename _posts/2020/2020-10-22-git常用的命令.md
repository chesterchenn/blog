---
layout: post
tags: 2020 others
---

记录一些常用的 git 命令

## 配置

用户信息全局配置，只配置当前项目去掉参数 `--globale` 即可。

```shell
git config --global user.name 'username'
git config --global user.email 'email@example.com'
```

`git config --global core.editor vim` 修改 git 默认编辑器

## 分支

`git checkout -b <branch> <remote>/<branch>` 从 remote/branch 切出分支，省略代表当前分支

`git branch -m <branch>` 重命名分支

## 删除分支

`git branch -d <branch>` 删除本地分支

`git branch -D <branch>` 强制删除本地分支

`git push <remote> :<branch>` 或 `git push origin --delete branch` 删除远程分支

`git remote prune origin` 若追踪的远程分支已经删除，则删除本地分支

## 远程仓库

`git remote -v` 查看远程仓库地址

`git remote set-url origin <URL>` 修改远程仓库的 url

## 中途保存

```shell
git stash     # 将本地代码放在暂存区
git pull      # 从远程拉取新代码
git stash pop # 将暂存区代码放回本地
```

## 日志

`git log <branch> <branch>` 指定分支的日志

`git log --all --oneline --graph` 展示所有分支的提交记录，以单线图形展示

`git log --author='name'` 指定指定作者的记录

`git log --after="2022-01-01" --before="2022-04-01"` 统计 2022-01-01 之后，2022-04-01 之前的记录

`git log --pretty=format:"%an %ad: %s"` 格式化统计

`git log --pretty=tformat: --numstat | awk '{add += $1; subs += $2; total += $1 + $2} END { printf "added lines: %s, removed lines: %s, total lines: %s\n", add, subs, total }'` 统计修改的代码行数

## .gitignore 无效

当一个文件被追踪之后，再添加到 .gitignore 文件会生效，运行命令

```shell
git rm -r --cached / git rm --cached *.log
git add .
git commit -m ''
```

## 参考链接

- [git](https://git-scm.com/docs)
- [521xueweihan / git-tips](https://github.com/521xueweihan/git-tips)
