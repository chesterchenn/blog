---
layout: post
tags: javascript
---
函数柯里化（Currying）就是将函数多个参数转换成一列单个参数的函数。

例如：
```
x = f(a, b, c) 变成
    h = g(a)
    i = h(b)
    x = i(c)
或者序列调用
x = f(a)(b)(c)
```

## 在 JS 简单使用
#### 使用函数声明式
```js
function currying(a) {
  return function(b) {
    console.log(a, b);
  }
}

currying('a')('b');
```

#### 使用函数表达式
```js
const currying = function(a) {
  return function(b) {
    console.log(a, b);
  }
}

currying('c')('d');
```

#### 使用箭头函数
```js
const currying = (a) => (b) => {
  console.log(a, b);
}

currying('e')('f')
```

## JS 函数柯里化
柯里化函数通常由以下步骤动态创建：调用另一个函数并为它传入要柯里化的函数和必要的参数。

```js
function currying(fn) {
  var args = Array.prototype.slice.call(arguments, 1);
  return function() {
    var innerArgs = Array.prototype.slice.call(arguments);
    var finalArgs = args.concat(innerArgs);
    return fn.apply(null, finalArgs);
  };
}
```

使用
```js
var cost = (function() {
  var money = 0;
  return function() {
    for (var i = 0; i < arguments.length; i++) {
      money += arguments[i];
    }
    return money;
  }
})();

var cost = currying(cost, 100);
cost(200); // 传入了参数，不真正求值
cost(300); // 传入了参数，不真正求值

console.log(cost()); // 求值并且输出600
```

## 参考链接
- 《JavaScript高级程序设计》 22.1.5
- [Wiki: Currying](https://en.wikipedia.org/wiki/Currying)
- [实现 add(1)(2)(3) ](https://github.com/lgwebdream/FE-Interview/issues/21)
- [知乎: JavaScript函数柯里化](https://zhuanlan.zhihu.com/p/31271179)