---
tags: javascript 
title: JS的类型转换
---
将值从一种类型转换为另一种类型通常称为*类型转换*（type casting）,这是显式的情况；隐式的情况称为*强制类型转换*（coercion）。 -- 《你不知道的JavaScript》

JS 中的强制类型转换总是返回基本类型值。类型转换发生在静态类型语言的编译阶段，而强制类型转换则发生在动态类型语言的运行时（runtime）。

## 表格
JavaScript 常见的类型转换表格如下：

| 值 | 转布尔值 | 转字符串 | 转数字 | 转对象 |
| -- | -------- | -------- | ------ | ------ |
| undefined | false | "undefined" | NaN | throws TypeError |
| null | false | "null" | 0 | throws TypeError |
| true | | "true" | 1 | new Boolean(true) |
| false | | "fasle" | 0 | new Boolean(false) |
| "" | fasle | | 0 | new String("") |
| "2" | true | | 2 | new String("2") | 
| "one" | true | | NaN | new String("two") |
| 0(-0) | false | "0" | | new Number(0) |
| NaN | false | "NaN" | | new Number(NaN) |
| 1 | true | "1" | | new Number(1) |
| [] | true | "" | 0 | |
| [9] | true | "9" | 9 | |
| {} | true | "[object Object]" | {} | |

## && 和 ||
*和其他的语言不同，在 JavaScript中它们返回的并不是布尔值，是两个操作数中的一个（仅且一个）*  

只要“&&”前面是 false，返回“&&”前面的值，否则将返“&&”后面的值  
只要“||”前面为 true，返回“||”前面的值，否则返回“||”后面的值  
```js
console.log(1 && 2); // 2
console.log(1 || 0); // 1
```

## 隐式转换 Boolean
隐式转换Boolean false值只有: `undefined`, `null`, `""`(空字符串), `0`, `-0`, `NaN` 

## == 的隐式转换的规则
宽松相等（loose equals）== 和严格相等（strict equals）=== 在判定的区别：== 允许在相等比较中进行隐式强制类型转换，而 === 不允许。

- NaN 不等于 NaN
- null 与 undefined 比较结果为 true。除此之外的值跟它们比较都为 false。
- 字符串和数字之间相等比较时，把字符串转换成数字。
- 布尔值和其他类型相等比较时，转换成数字类型比较。false 转换成 0，true 转换成 1。
- 对象和字符串类型相等比较时，把对象转换成字符串。  
- 对象和数字类型相等比较时，把对象转换成数字。  

```js
'' == false; // true
'' == 0;     // true
'' == [];    // true
'' == {};    // false   {}转成字符串 [object Object]
null == undefined; // true
```

## + 和 -
如果 `+` 的其中一个操作数是字符串（或者通过隐式转换得到字符串），则执行字符串拼接。否则执行数字加法。  
`-` 是数字减法运算符，只用于数字，因此会将字符串类型转换为数字。
```js
'a' + 1; // "a1"
'2' + 1; // "21"
'a' - 1; // NaN
'3' - 1; // 2
'b' - 'a'; // NaN
'3' + 2 - 1; // 31
```

## 参考链接
- 《你不知道的JavaScript(中)》第4章 强制类型转换
- 《JavaScript权威指南》