---
title: HTTPS
tags: HTTP
---
HTTPS 就是在安全的传输层上发送 HTTP。HTTPS 在将 HTTP 报文发送给 TCP 之前，先将其内容发送给一个安全层，对其进行加密。现在，HTTP 安全层是通过 SSL 及其替代协议 TLS 来实现。

## HTTPS 的建立
HTTPS 在将 HTTP 报文发送给 TCP 之前，先将其发送给一个安全层（SSL）,对其进行加密。在 HTTPS 中，客户端首先打开一条到 Web 服务器端口 443 的连接。一旦建立了 TCP 连接，客户端和服务器就会初始化 SSL 层，对加密参数进行沟通，并交换密钥。握手完成后，SSL 的初始化就完成了，客户端就可以将请求报文发送给安全层了。在这些报文发送给 TCP 之前，要先对其进行加密。  

## SSL 握手
在发送已加密的 HTTP 报文之前，客户端和服务器要进行一次 SSL 握手，在这个过程中，它们要完成以下工作：

- 交换协议版本号
- 选择一个两端都了解的密码
- 对两端的身份进行认证
- 生成临时的会话密钥，以便加密信道

```
1. 客户端发送可供选择的密码并请求证书
客户端 =======> 服务器

2. 服务器发送选中的密码和证书
客户端 <===[服务器证书]==== 服务器  

3. 客户端发送保密信息；客户端和服务器生成密钥
[key] <- 客户端 =======> 服务器 -> [key]

4. 客户端和服务器相互告知，开始加密过程
客户端 <======> 服务器
```

## 一些缺点
1. HTTPS 协议握手阶段比较耗时。
2. HTTPS 连接缓存不如 HTTP 高效，会增加数据开销和功耗。
3. HTTPS 协议要申请证书到 CA（认证机构），需要一定经济成本。

## 参考链接
- 《HTTP权威指南》14.7
- [http 和 https 有何区别？如何灵活使用？ - 程序员cxuan的回答 - 知乎](https://www.zhihu.com/question/19577317/answer/1157658840)