---
layout: post
tags: 2019 network os
title: OSI七层网络模型
---

开放式系统互联通信参考模型（Open Systems Interconnection model, OSI model）。OSI 模型是电信通信和计算机系统的概念模型，目的是为了实现各种通信系统之间的标准协议。该模型将通信系统划分成 7 层抽象层。

| 层级 | 名称       | 设备               | 协议数据单元 | 功能                                                                |
| :--: | ---------- | ---                | -----------  | ------------------------------------------------------------------  |
| 7    | 应用层     | 网关               | 数据(data)   | 高级 API，包括资源共享，远程文件访问                                |
| 6    | 表示层     | 网关               | 数据(data)   | 网络服务和应用程序之间的数据转换; 包括字符编码，数据压缩和加密/解密 |
| 5    | 会话层     | 网关               | 数据(data)   | 管理通信会话                                                        |
| 4    | 传输层     | 网关               | 段(segment)  | 在网络上的点之间可靠地传输数据段，包括分段，确认和多路复用          |
| 3    | 网络层     | 路由器             | 包(packet)   | 构建和管理多节点网络，包括寻址，路由和流量控制                      |
| 2    | 数据链路层 | 交换机、网桥、网卡 | 帧(frame)    | 在由物理层连接的两个节点之间可靠地传输数据帧                        |
| 1    | 物理层     | 集线器、中继器, 猫 | 符号(Symbol) | 通过物理介质发送和接收原始比特流                                    |

## 各层应用

### 物理层(Physical)

物理层负责在设备和物理传输介质之间传输和接收非结构化的原始数据，它能将数字位转换成电信号，无线电信号或者光信号。蓝牙，以太网和 USB 都具有物理层的规格。

物理层定义的规范有：EIA/TIA RS-232、EIA/TIA RS-449、V.35、RJ-45等。

### 数据链路层(Data Link)

数据链路层提供节点到节点的数据传输 - 两个直接连接的节点之间的链路。它定义了两个物理连接设备之间连接的建立和终止协议和流控制协议。

IEEE 802 将数据链路层划分为两个子层：

- 介质访问控制(Medium Access Control, MAC)，数据链路层的下层，负责控制网络中的设备如何获得对介质的访问权限以及传输数据的权限。
- 逻辑链路控制(Logical Link Control, LLC)，数据链路层的上层，负责识别和封装网络层协议，并控制错误检查和帧同步。

该层的作用包括：物理地址寻址、数据的成帧、流量控制、数据的检错和重发等。

数据链路层协议的代表有：ARP、RARP、SDLC、HDLC、PPP、STP、帧中继等。

### 网络层(Network)

网络层提供了将可变长度的数据序列(数据包, packet)从不同网络一个节点传输到另一个节点的功能和程序手段。

网络是可以连接许多节点的媒介，每个节点都有一个地址，并允许连接到它的节点通过仅提供消息的内容和目的地的地址将消息传送到与其连接的其他节点。在这里可以将数据切割成若干帧，经过数据链路层传输后重新组装。

该层的作用包括：地址解析、路由、还可以实现拥塞控制、网际互连等功能。

网络层协议的代表有：IP、ICMP、IGMP、IPX、RIP、OSPF等。

### 传输层(Transport)

传输层提供了将可变长度数据序列从源主机传输到目标主机的功能和程序手段，同时保持了服务质量的功能。传输层通过流控制，分段/解除分段和错误控制来控制给定链路的可靠性。可以把传输层想象成邮局，在这里处理邮件和包裹的发送和分类。

传输层协议的代表有：TCP、UDP、SPX等。

### 会话层(Session)

会话层控制计算机之间的对话(连接)，负责建立，管理和终止本地和远程应用程序之间的连接。

会话层不参与具体的传输，它提供包括访问验证和会话管理在内的建立和维护应用之间的通信机制。如服务器验证用户登录。

### 表示层(Presentation)

表示层在应用层实体之间建立上下文。表示层将数据转化成应用层可识别的语法。即提供格式化的表示和转换数据服务，数据的压缩和解压缩，加密和解密等工作。

### 应用层(Application)

应用层最靠近用户，应用层和用户可以通过应用软件可以直接作用。应用程序层中最重要的区别是应用程序实体和应用程序之间的区别。

应用层协议的代表有：Telnet、FTP、HTTP、SNMP等。

## 设备与OSI模型

**网卡**：网卡工作在数据链路层。网卡拥有 MAC 地址，它让用户可以通过电缆或无线相互连接。

**集线器**：集线器工作在物理层。集线器的主要功能是对接收的信号进行再生整形放大，以扩大网络的传输距离，同时把所有节点集中在以它为中心的节点上。

**交换机**：交换机工作在数据链路层。交换机也叫交换式集线器，它通过对信息进行重新生成，经过内部处理后转发至指定的端口。具备自动寻址和交换功能。

**路由器**：路由器工作在网络层。路由器主要作用是连通不同的网络，选择信息传送的路径。

**调制解调器**：调制解调器工作在物理层。调制解调器也叫 Modem，一般也称为“猫”。调制：将计算机的数字信号翻译成电话线传输的脉冲信号；解调：将脉冲信息转换成数字信号。合称调制解调器。

### 交换机与路由器的区别

1. 路由器给可以给局域网自动分配 IP，虚拟拨号。交换机只是用来分配网络数据。
2. 路由器在网络层，根据 IP 地址寻址，路由器可以处理 TCP/IP 协议，交换机不可以。交换机在数据链路层，交换机根据 MAC 地址寻址。
3. 路由器可以把一个 IP 分配给多个主机使用，这些主机对外只表现出一个 IP。交换机可以把很多主机连起来，这些主机对外各有各的 IP。
4. 路由器提供防火墙的服务，交换机不能提供该功能。
5. 路由器是用来做网间连接，也就是用来连接不同的网络。交换机、集线器都是用来做端口扩展的，扩大局域网的接入点。

一个家庭组网的例子

![Home Network]({{ "images/home.jpg" | relative_url }})

## 跨层功能

- 安全服务(Security Service)
- 多协议标签交换(Multiprotocol Label Switching, MPLS)
- 地址解析协议(Address Resolution Protocol, ARP)
- 动态主机设置协议(Dynamic Host Configuration Protocol, DHCP)
- 域名系统(Domain Name System, DNS)

## 网络协议

### ARP

ARP（Address Resolution Protocol）即地址解析协议，用于实现从 IP 地址到 MAC 地址的映射，即询问目标 IP 对应的 MAC 地址。

在网络通信中，主机和主机通信的数据包需要依据 OSI 模型从上到下进行数据封装，当数据封装完整后，再向外发出。所以在局域网的通信中，不仅需要源目 IP 地址的封装，也需要源目 MAC 的封装。

一般情况下，上层应用程序更多关心 IP 地址而不关心 MAC 地址，所以需要通过 ARP 协议来获取目的主机的 MAC 地址，完成数据封装。

## 参考链接

- [维基百科：OSI model](https://en.wikipedia.org/wiki/OSI_model)
- [网络知识梳理--OSI七层网络与TCP/IP五层网络架构及二层/三层网](https://www.cnblogs.com/kevingrace/p/5909719.html)
- [交换机和路由器的区别](https://product.pconline.com.cn/itbk/wlbg/wireless/1511/7143670.html)
- [图解ARP协议（一）](https://zhuanlan.zhihu.com/p/28771785)
