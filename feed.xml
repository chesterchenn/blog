<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="/blog/feed.xml" rel="self" type="application/atom+xml" /><link href="/blog/" rel="alternate" type="text/html" /><updated>2025-02-18T04:24:38+00:00</updated><id>/blog/feed.xml</id><title type="html">ä¸»é¡µ</title><subtitle>çœ‹è‡ªå·±è¶…è¿‡ä¸¤å‘¨ä¹‹å‰å†™çš„ä»£ç å°±è·Ÿä¹‹å‰æ²¡çœ‹è¿‡ä¸€æ ·ã€‚</subtitle><entry><title type="html">ç§»åŠ¨ WSL åˆ°å…¶ä»–ç¡¬ç›˜</title><link href="/blog/2025/02/18/%E7%A7%BB%E5%8A%A8WSL%E5%88%B0%E5%85%B6%E4%BB%96%E7%A1%AC%E7%9B%98.html" rel="alternate" type="text/html" title="ç§»åŠ¨ WSL åˆ°å…¶ä»–ç¡¬ç›˜" /><published>2025-02-18T00:00:00+00:00</published><updated>2025-02-18T00:00:00+00:00</updated><id>/blog/2025/02/18/%E7%A7%BB%E5%8A%A8WSL%E5%88%B0%E5%85%B6%E4%BB%96%E7%A1%AC%E7%9B%98</id><content type="html" xml:base="/blog/2025/02/18/%E7%A7%BB%E5%8A%A8WSL%E5%88%B0%E5%85%B6%E4%BB%96%E7%A1%AC%E7%9B%98.html"><![CDATA[<p>åœ¨ä½¿ç”¨ WSL çš„æ—¶å€™å¾€å¾€ä¼šå ç”¨ C ç›˜çš„ç©ºé—´ï¼Œå¯ä»¥å°† WSL ç§»åŠ¨åˆ°å…¶ä»–ç¡¬ç›˜ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœ C ç›˜çš„ç©ºé—´ã€‚</p>

<ol>
  <li>
    <p>ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œ PowerShell æˆ–è€… CMDã€‚</p>
  </li>
  <li>
    <p>æ‰§è¡Œå‘½ä»¤: <code class="language-plaintext highlighter-rouge">wsl -l -v</code> æŸ¥çœ‹å½“å‰è¿è¡Œçš„å­ç³»ç»Ÿï¼Œå¦‚æœè¿è¡ŒçŠ¶æ€ï¼Œæ‰§è¡Œ <code class="language-plaintext highlighter-rouge">wsl -t Ubuntu</code> å‘½ä»¤åœæ­¢å­ç³»ç»Ÿã€‚</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   NAME      STATE           VERSION
 <span class="k">*</span> Ubuntu    Running         2
</code></pre></div>    </div>
  </li>
  <li>
    <p>å°†å­ç³»ç»Ÿå¯¼å‡ºã€‚</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl <span class="nt">--export</span> Ubuntu D:<span class="se">\u</span>buntu.tar
</code></pre></div>    </div>
  </li>
  <li>
    <p>å–æ¶ˆæ³¨å†Œåˆ†å‘ç‰ˆå¹¶åˆ é™¤æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl <span class="nt">--unregister</span> Ubuntu
</code></pre></div>    </div>
  </li>
  <li>
    <p>å°†ç³»ç»Ÿå¯¼å…¥åˆ°æ–°çš„ç›®å½•ï¼Œä»¥ <code class="language-plaintext highlighter-rouge">D:\wsl</code> ç›®å½•ä¸ºä¾‹ã€‚</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wsl <span class="nt">--import</span> Ubuntu D:<span class="se">\w</span>sl D:<span class="se">\u</span>buntu.tar
</code></pre></div>    </div>
  </li>
  <li>
    <p>å¯¼å…¥åï¼Œé»˜è®¤ä¸º root ç”¨æˆ·ï¼Œè®¾ç½®é»˜è®¤ç”¨æˆ·ã€‚</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ubuntu config <span class="nt">--default-user</span> <span class="o">[</span>user]
</code></pre></div>    </div>
  </li>
</ol>]]></content><author><name></name></author><category term="2025" /><category term="linux" /><category term="windows" /><summary type="html"><![CDATA[åœ¨ä½¿ç”¨ WSL çš„æ—¶å€™å¾€å¾€ä¼šå ç”¨ C ç›˜çš„ç©ºé—´ï¼Œå¯ä»¥å°† WSL ç§»åŠ¨åˆ°å…¶ä»–ç¡¬ç›˜ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœ C ç›˜çš„ç©ºé—´ã€‚]]></summary></entry><entry><title type="html">dante å®‰è£…ä¸ä½¿ç”¨</title><link href="/blog/2024/11/04/dante%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8.html" rel="alternate" type="text/html" title="dante å®‰è£…ä¸ä½¿ç”¨" /><published>2024-11-04T00:00:00+00:00</published><updated>2024-11-04T00:00:00+00:00</updated><id>/blog/2024/11/04/dante%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8</id><content type="html" xml:base="/blog/2024/11/04/dante%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8.html"><![CDATA[<p>Dante æ˜¯ä¸€ä¸ªæä¾› SOCKS æœåŠ¡çš„ç½‘ç»œä»£ç†è½¯ä»¶ã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#å®‰è£…">å®‰è£…</a></li>
  <li><a href="#é…ç½®">é…ç½®</a></li>
  <li><a href="#å¯åŠ¨ä¸åœæ­¢">å¯åŠ¨ä¸åœæ­¢</a></li>
  <li><a href="#å…¶ä»–äº‹é¡¹">å…¶ä»–äº‹é¡¹</a></li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="å®‰è£…">å®‰è£…</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>dante-server
</code></pre></div></div>

<h2 id="é…ç½®">é…ç½®</h2>

<p>é…ç½®æ–‡ä»¶æ˜¯ <code class="language-plaintext highlighter-rouge">/etc/danted.conf</code>ã€‚</p>

<p>ä½¿ç”¨æ—¶æœ€å¥½æ·»åŠ ä¸€ä¸ªä¸“é—¨ä»£ç†çš„ç”¨æˆ·ï¼Œè¿™æ ·å¯ä»¥é™åˆ¶ç”¨æˆ·çš„è®¿é—®æƒé™ã€‚å‡è®¾æˆ‘ä»¬è®¾ç½®çš„ç”¨æˆ·ä¸º <code class="language-plaintext highlighter-rouge">dante</code>ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># æ·»åŠ ä¸€ä¸ªæœ¬åœ°ç”¨æˆ·ï¼Œä¸åˆ›å»ºé»˜è®¤ç›®å½•å’Œç™»å½• shell</span>
<span class="nb">sudo </span>useradd <span class="nt">--no-create-home</span> <span class="nt">-s</span> /sbin/nologin dante

<span class="c"># è®¾ç½®å¯†ç ï¼Œå®¢æˆ·ç«¯ç™»é™†ä½¿ç”¨</span>
<span class="nb">sudo </span>passwd dante
</code></pre></div></div>

<p>éƒ¨åˆ†é…ç½®å¦‚ä¸‹</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># /etc/danted.conf</span>

internal: 0.0.0.0 port <span class="o">=</span> 1080
external: eth0

clientmethod: none
socksmethod: pam.username none

user.privileged: root
user.unprivileged: dante

client pass <span class="o">{</span>
    from: 0/0 to: 0/0
<span class="o">}</span>

socks pass <span class="o">{</span>
    from: 0/0 to: 0/0
    socksmethod: pam.username
<span class="o">}</span>
</code></pre></div></div>

<p>æœ€åå¯ä»¥ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">dnated -V</code> æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</p>

<h2 id="å¯åŠ¨ä¸åœæ­¢">å¯åŠ¨ä¸åœæ­¢</h2>

<p>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">systemctl</code> æˆ–è€… <code class="language-plaintext highlighter-rouge">service</code> å‘½ä»¤æ¥ç®¡ç†æœåŠ¡ï¼Œåˆ†åˆ«æ˜¯å¯åŠ¨ï¼Œåœæ­¢ï¼Œé‡å¯å’Œæ£€æŸ¥æœåŠ¡çŠ¶æ€</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start danted
<span class="nb">sudo </span>systemctl stop danted

<span class="c"># æˆ–è€…</span>
<span class="nb">sudo </span>service danted status
<span class="nb">sudo </span>service danted restart
</code></pre></div></div>

<p>æµ‹è¯•æ˜¯å¦æ­£å¸¸ä½¿ç”¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-x</span> socks5://127.0.0.1:1080 https://ifconfig.co <span class="nt">--proxy-user</span> proxy:[password]
</code></pre></div></div>

<h2 id="å…¶ä»–äº‹é¡¹">å…¶ä»–äº‹é¡¹</h2>

<ul>
  <li>éœ€è¦å¼€å¯é˜²ç«å¢™å¯¹åº”çš„ç«¯å£ï¼Œé˜²ç«å¢™å‘½ä»¤æ˜¯ <code class="language-plaintext highlighter-rouge">sudo ufw allow 1080</code> æˆ–è€…åˆ° VPS å¼€å¯å¯¹åº”çš„ç½‘ç»œè§„åˆ™</li>
</ul>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://github.com/Lozy/danted">GitHub - Lozy/danted: Fast script for installing &amp; configing Dantedâ€“Socks5 Proxy Server.</a></li>
  <li><a href="https://virmach.com/how-to-set-up-socks5-proxy-server-on-a-vps/">How to set up SOCKS5 proxy server (Dante) on a VPS</a></li>
</ul>]]></content><author><name></name></author><category term="2024" /><category term="linux" /><summary type="html"><![CDATA[Dante æ˜¯ä¸€ä¸ªæä¾› SOCKS æœåŠ¡çš„ç½‘ç»œä»£ç†è½¯ä»¶ã€‚]]></summary></entry><entry><title type="html">IndexedDB</title><link href="/blog/2024/08/28/indexeddb.html" rel="alternate" type="text/html" title="IndexedDB" /><published>2024-08-28T00:00:00+00:00</published><updated>2024-08-28T00:00:00+00:00</updated><id>/blog/2024/08/28/indexeddb</id><content type="html" xml:base="/blog/2024/08/28/indexeddb.html"><![CDATA[<p>IndexedDB æ˜¯ä¸ªå®¢æˆ·ç«¯å­˜å‚¨é”®å€¼å­˜å‚¨çš„æ•°æ®åº“ã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#æ¦‚å¿µ">æ¦‚å¿µ</a></li>
  <li><a href="#æ‰“å¼€">æ‰“å¼€</a></li>
  <li><a href="#æ„å»º">æ„å»º</a></li>
  <li><a href="#æ’å…¥åˆ é™¤æŸ¥è¯¢æ›´æ–°æ•°æ®">æ’å…¥/åˆ é™¤/æŸ¥è¯¢/æ›´æ–°æ•°æ®</a></li>
  <li><a href="#æ¸¸æ ‡">æ¸¸æ ‡</a></li>
  <li><a href="#ç´¢å¼•">ç´¢å¼•</a></li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="æ¦‚å¿µ">æ¦‚å¿µ</h2>

<ul>
  <li>ä»“åº“ Storeï¼šIndexedDB æ²¡æœ‰è¡¨ï¼Œåªæœ‰ä»“åº“ã€‚</li>
  <li>ç´¢å¼• Index: ç´¢å¼•æ–¹ä¾¿å¿«é€Ÿç­›é€‰ã€‚</li>
  <li>æ¸¸æ ‡ Cursor: ç”¨äºæŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚</li>
  <li>äº‹åŠ¡ Transactionï¼šå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œå¤±è´¥çš„è¯ä¼šå›æ»šï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li>
</ul>

<h2 id="æ‰“å¼€">æ‰“å¼€</h2>

<p>å¼€æ•°æ®åº“ï¼Œè‹¥æ²¡æœ‰åˆ™ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">indexedDB</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyDatabase</span><span class="dl">'</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ä¿å­˜ IDBDatabase æ¥å£</span>
  <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onupgradeneeded</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>
</code></pre></div></div>

<h2 id="æ„å»º">æ„å»º</h2>

<p><code class="language-plaintext highlighter-rouge">createObjectStore</code> ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨åˆ›å»ºä»“åº“åç§°ï¼Œç¬¬äºŒä¸ªä¸ºå¯¹è±¡ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// çœç•¥æ‰“å¼€</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">onupgradeneeded</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="c1">// ä»“åº“</span>
  <span class="kd">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">createObjectStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">keyPath</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ssn</span><span class="dl">'</span> <span class="p">});</span>
  <span class="c1">// ç´¢å¼•</span>
  <span class="nx">objectStore</span><span class="p">.</span><span class="nf">createIndex</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">unique</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="æ’å…¥åˆ é™¤æŸ¥è¯¢æ›´æ–°æ•°æ®">æ’å…¥/åˆ é™¤/æŸ¥è¯¢/æ›´æ–°æ•°æ®</h2>

<p>æ’å…¥æ“ä½œåŸºäºäº‹åŠ¡ï¼Œæ‰§è¡Œæ’å…¥æ“ä½œä¹‹å‰éœ€è¦åˆ›å»ºäº‹åŠ¡</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// åˆ›å»ºäº‹åŠ¡</span>
<span class="kd">const</span> <span class="nx">transaction</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">transaction</span><span class="p">([</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">],</span> <span class="dl">'</span><span class="s1">readwrite</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">transaction</span><span class="p">.</span><span class="nx">oncomplete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>
<span class="nx">transaction</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>

<span class="kd">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">transaction</span><span class="p">.</span><span class="nf">objectStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nf">add</span><span class="p">({</span> <span class="na">ssn</span><span class="p">:</span> <span class="dl">'</span><span class="s1">4-4</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bill</span><span class="dl">'</span> <span class="p">});</span>

<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">4-4</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="dl">'</span><span class="s1">4-4</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nf">put</span><span class="p">({</span> <span class="na">ssn</span><span class="p">:</span> <span class="dl">'</span><span class="s1">4-4</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">});</span>
</code></pre></div></div>

<h2 id="æ¸¸æ ‡">æ¸¸æ ‡</h2>

<p>ä½¿ç”¨æ¸¸æ ‡å¯ä»¥éå†æ‰€æœ‰å€¼ï¼Œå¿…é¡»éœ€è¦å…ˆè¿›è¡Œåˆ¤æ–­æ¸¸æ ‡çš„å€¼æ˜¯å¦ä¸ºç©ºã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">transaction</span><span class="p">(</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">).</span><span class="nf">objectStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">objectStore</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nf">transaction</span><span class="p">([</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">]).</span><span class="nf">objectStore</span><span class="p">(</span><span class="dl">'</span><span class="s1">customers</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">objectStore</span><span class="p">.</span><span class="nf">openCursor</span><span class="p">().</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="c1">// åˆ¤æ–­å¿…é¡»è¦æœ‰</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">cursor</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s2">`Name for SSN </span><span class="p">${</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">key</span><span class="p">}</span><span class="s2"> is </span><span class="p">${</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="k">continue</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">No more entries!</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="ç´¢å¼•">ç´¢å¼•</h2>

<p>ä½¿ç”¨ç´¢å¼•å¯ä»¥è·å¾—ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">index</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">Jane</span><span class="dl">'</span><span class="p">).</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{};</span>
</code></pre></div></div>

<p>é…åˆæ¸¸æ ‡æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">objectStore</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">index</span><span class="p">.</span><span class="nf">openCursor</span><span class="p">().</span><span class="nx">onsuccess</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">cursor</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="k">continue</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼š<a href="https://codesandbox.io/p/sandbox/indexdb-rn76fm">sandbox</a></p>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB API - Web APIs | MDN</a></li>
  <li><a href="https://www.w3.org/TR/IndexedDB/">Indexed Database API 3.0</a></li>
  <li><a href="https://www.tangshuang.net/3735.html#">IndexedDB ä¸­æ–‡æ•™ç¨‹_å”éœœçš„åšå®¢</a></li>
</ul>]]></content><author><name></name></author><category term="2024" /><category term="javascript" /><summary type="html"><![CDATA[IndexedDB æ˜¯ä¸ªå®¢æˆ·ç«¯å­˜å‚¨é”®å€¼å­˜å‚¨çš„æ•°æ®åº“ã€‚]]></summary></entry><entry><title type="html">NeoVim ä½¿ç”¨ä½“éªŒ</title><link href="/blog/2024/02/22/neovim%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C.html" rel="alternate" type="text/html" title="NeoVim ä½¿ç”¨ä½“éªŒ" /><published>2024-02-22T00:00:00+00:00</published><updated>2024-02-22T00:00:00+00:00</updated><id>/blog/2024/02/22/neovim%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C</id><content type="html" xml:base="/blog/2024/02/22/neovim%E4%BD%BF%E7%94%A8%E4%BD%93%E9%AA%8C.html"><![CDATA[<p>åœ¨ä½¿ç”¨ vim çš„ä¸€æ®µæ—¶é—´æ—¶å€™ï¼Œæ¥è§¦åˆ° neovimï¼Œåˆšå¼€å§‹å¹¶æ²¡æœ‰æ‰“ç®—åˆ‡æ¢è¿‡å»ï¼Œä½†æ˜¯éšç€æ…¢æ…¢çš„æ·±å…¥ä½¿ç”¨ã€‚å‘ç° neovim çš„ä¸€äº›ä¼˜åŠ¿ï¼š</p>

<ol>
  <li>æ’ä»¶ç”Ÿæ€æ›´åŠ ä¸°å¯Œã€‚</li>
  <li>vim åˆ‡æ¢ neovim çš„æˆæœ¬æä½ã€‚</li>
</ol>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#å®‰è£…">å®‰è£…</a></li>
  <li><a href="#é…ç½®">é…ç½®</a></li>
  <li><a href="#æ’ä»¶">æ’ä»¶</a>
    <ul>
      <li><a href="#ä¾èµ–">ä¾èµ–</a></li>
    </ul>
  </li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="å®‰è£…">å®‰è£…</h2>

<p>ä¸»è¦æ˜¯é’ˆå¯¹ Linux ä¸Šçš„ neovim å®‰è£…ï¼ŒWindows ä¸‹ä¹Ÿæœ‰ neovim çš„ä½¿ç”¨ï¼Œä½†æ˜¯æ²¡æ€ä¹ˆå®è·µã€‚</p>

<p>Arch ä¸‹è¿è¡Œå‘½ä»¤ï¼š<code class="language-plaintext highlighter-rouge">sudo pacman -S neovim</code> å³å¯ã€‚</p>

<p>Ubuntu ä¸‹é»˜è®¤çš„ PPA åŒ…å·²ç»ä¸å†æ›´æ–°ï¼Œä¸€ä¸ªç®€å•çš„å¯é€‰çš„æ–¹æ³•å°±æ˜¯å®‰è£…å¼€å‘ç‰ˆæœ¬ï¼Œé™¤äº†å¶å°”ç‰ˆæœ¬é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿˜æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>add-apt-repository ppa:neovim-ppa/unstable
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>neovim
</code></pre></div></div>

<p>å…¶ä»–ç›¸å…³å®‰è£…å¯ä»¥æŸ¥çœ‹å®˜æ–¹é“¾æ¥ <a href="https://github.com/neovim/neovim/blob/master/INSTALL.md">neovim/INSTALL.md</a></p>

<h2 id="é…ç½®">é…ç½®</h2>

<p>å®‰è£…æˆåŠŸä¹‹åå³å¯ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">nvim</code> æ‰“å¼€ neovimï¼Œä¸ºäº†æ›´åŠ æ˜“ç”¨ï¼Œé…ç½® neovim å°±å¾ˆæœ‰å¿…è¦æ€§äº†ã€‚</p>

<p>é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯åœ¨ <code class="language-plaintext highlighter-rouge">$HOME/.config/nvim/init.vim</code></p>

<h2 id="æ’ä»¶">æ’ä»¶</h2>

<p>æ’ä»¶ç®¡ç†å·¥å…·åˆ™ä½¿ç”¨äº† <a href="https://github.com/junegunn/vim-plug">Vim-Plug</a>ï¼Œé»˜è®¤ä½ç½®ï¼š<code class="language-plaintext highlighter-rouge">$HOME/.config/share/nvim/site/autoload/plug.vim</code>, å¿«é€Ÿå®‰è£…æŒ‡ä»¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh <span class="nt">-c</span> <span class="s1">'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'</span>
</code></pre></div></div>

<p>ä¸‹è½½å®Œæˆä¹‹åå³å¯ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">:PlugInstall</code> è¿›è¡Œæ’ä»¶çš„å®‰è£…ã€‚</p>

<h3 id="ä¾èµ–">ä¾èµ–</h3>

<p>éƒ¨åˆ†æ’ä»¶éœ€è¦å®‰è£…ä¾èµ–çš„ä¸œè¥¿ã€‚</p>

<ul>
  <li>
    <p>ä»£ç æç¤º <a href="https://github.com/neoclide/coc.nvim">neoclide/coc.nvim</a></p>

    <p>éœ€è¦ nodejs &gt;= 16.18.0</p>
  </li>
  <li>
    <p>æ–‡ä»¶å¯¼èˆª <a href="https://github.com/kevinhwang91/rnvimr">kevinhwang91/rnvimr</a></p>

    <p>ranger ä½¿ç”¨ pip å®‰è£… <code class="language-plaintext highlighter-rouge">pip3 install ranger-fm</code></p>
  </li>
  <li>
    <p>å¿«é€Ÿæœç´¢ <a href="https://github.com/nvim-telescope/telescope.nvim">nvim-telescope/telescope.nvim</a></p>

    <p>éœ€è¦å®‰è£…çš„ NeoVim &gt;= 0.9.0</p>

    <p>éœ€è¦åœ¨ç³»ç»Ÿå®‰è£… <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a></p>
  </li>
</ul>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://github.com/neovim/neovim/blob/master/INSTALL.md">neovim/INSTALL.md</a></li>
  <li><a href="https://github.com/junegunn/vim-plug">Vim-Plug</a></li>
</ul>]]></content><author><name></name></author><category term="2024" /><category term="linux" /><summary type="html"><![CDATA[åœ¨ä½¿ç”¨ vim çš„ä¸€æ®µæ—¶é—´æ—¶å€™ï¼Œæ¥è§¦åˆ° neovimï¼Œåˆšå¼€å§‹å¹¶æ²¡æœ‰æ‰“ç®—åˆ‡æ¢è¿‡å»ï¼Œä½†æ˜¯éšç€æ…¢æ…¢çš„æ·±å…¥ä½¿ç”¨ã€‚å‘ç° neovim çš„ä¸€äº›ä¼˜åŠ¿ï¼š]]></summary></entry><entry><title type="html">Cordova å¼€å‘çš„é—®é¢˜</title><link href="/blog/2024/02/21/cordova%E5%BC%80%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.html" rel="alternate" type="text/html" title="Cordova å¼€å‘çš„é—®é¢˜" /><published>2024-02-21T00:00:00+00:00</published><updated>2024-02-21T00:00:00+00:00</updated><id>/blog/2024/02/21/cordova%E5%BC%80%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98</id><content type="html" xml:base="/blog/2024/02/21/cordova%E5%BC%80%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.html"><![CDATA[<p>Cordova å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#gradle-ä¸‹è½½">gradle ä¸‹è½½</a></li>
  <li><a href="#debug-webview">Debug Webview</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="gradle-ä¸‹è½½">gradle ä¸‹è½½</h2>

<p>åœ¨æ„å»º android é¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦ä¸‹è½½ gradle é€Ÿåº¦ç‰¹åˆ«æ…¢çš„é—®é¢˜ã€‚</p>

<p>å¯ä»¥å» <code class="language-plaintext highlighter-rouge">https://services.gradle.org/distributions/</code> ä½¿ç”¨æµè§ˆå™¨ç­‰æ–¹å¼ä¸‹è½½ã€‚</p>

<p>ç„¶åè§£å‹åˆ° <code class="language-plaintext highlighter-rouge">C:\Users\&lt;youruser&gt;\.gradle\wrapper\dists\gradle-x.y-bin</code> ç›®å½•ä¸‹ã€‚</p>

<h2 id="debug-webview">Debug Webview</h2>

<p>å‰ç½®æ¡ä»¶ï¼šæ‰“å¼€ <code class="language-plaintext highlighter-rouge">USBè°ƒè¯•</code> åŠŸèƒ½</p>

<ol>
  <li>
    <p>Chrome</p>

    <p>ä½¿ç”¨ Chromeï¼Œæ‰“å¼€ <code class="language-plaintext highlighter-rouge">chrome://inspect/#devices</code></p>
  </li>
  <li>
    <p>Edge</p>

    <p>ä½¿ç”¨ Edgeï¼Œæ‰“å¼€ <code class="language-plaintext highlighter-rouge">edge://inspect/#devices</code></p>
  </li>
</ol>

<p>ä½¿ç”¨äº† chrome å¯èƒ½ä¼šé‡åˆ°ç½‘ç»œçš„é—®é¢˜ï¼Œåªéœ€è¦ç§‘å­¦ä¸Šç½‘å³å¯ã€‚</p>]]></content><author><name></name></author><category term="2024" /><category term="app" /><summary type="html"><![CDATA[Cordova å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆã€‚]]></summary></entry><entry><title type="html">Nodejs çš„ Process</title><link href="/blog/2024/01/17/nodejs%E7%9A%84process.html" rel="alternate" type="text/html" title="Nodejs çš„ Process" /><published>2024-01-17T00:00:00+00:00</published><updated>2024-01-17T00:00:00+00:00</updated><id>/blog/2024/01/17/nodejs%E7%9A%84process</id><content type="html" xml:base="/blog/2024/01/17/nodejs%E7%9A%84process.html"><![CDATA[<p>åœ¨ nodejs å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ° process å˜é‡ï¼Œprocess æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè´Ÿè´£æä¾›ä¿¡æ¯ï¼Œä»¥åŠæ§åˆ¶å½“å‰ nodejs è¿›ç¨‹ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">process</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node:process</span><span class="dl">'</span><span class="p">);</span>
<span class="k">import</span> <span class="nx">process</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">node:process</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#processenv">process.env</a>
    <ul>
      <li><a href="#é…ç½®">é…ç½®</a></li>
    </ul>
  </li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="processenv">process.env</h2>

<p>process.env è¿”å›å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡çš„å¯¹è±¡ã€‚ä¸€ä¸ªå¸¸è§çš„ process.env å‘½ä»¤å¦‚ä¸‹ï¼Œçœç•¥éƒ¨åˆ†ï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">COLORTERM</span><span class="p">:</span> <span class="dl">'</span><span class="s1">turecolor</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">DESKTOP_SESSION</span><span class="p">:</span> <span class="dl">'</span><span class="s1">plasma</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">GEM_HOME</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/home/chen/.local/share/gem</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">GTK_IM_MODULE</span><span class="p">:</span> <span class="dl">'</span><span class="s1">fcitx</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">HOME</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/home/chen</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">LANG</span><span class="p">:</span> <span class="dl">'</span><span class="s1">en_US.UTF-8</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">SHELL</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/usr/bin/zsh</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">TERM</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tmux-256color</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">USER</span><span class="p">:</span> <span class="dl">'</span><span class="s1">chen</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">EDITOR</span><span class="p">:</span> <span class="dl">'</span><span class="s1">nvim</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¯ä»¥çœ‹å‡ºï¼Œéƒ½æ˜¯ç”¨æˆ·ï¼ˆæˆ‘ï¼‰çš„ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œè€Œä¸”å˜é‡åéƒ½ä¹ æƒ¯æ€§å¤§å†™ã€‚</p>

<h3 id="é…ç½®">é…ç½®</h3>

<p>ç”±äº process.env å˜é‡æ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹çš„ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ä¸´æ—¶å˜é‡å°±å¯ä»¥åœ¨å½“å‰ç»ˆç«¯ä¸‹ç›´æ¥æ·»åŠ å˜é‡ã€‚</p>

<p>Window ä¸´æ—¶æ·»åŠ å‘½ä»¤å¦‚ä¸‹ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># æŸ¥çœ‹</span>
<span class="nb">set </span>NODE_ENV
<span class="c"># æ·»åŠ </span>
<span class="nb">set </span><span class="nv">NODE_ENV</span><span class="o">=</span>production
<span class="c"># è¿½åŠ </span>
<span class="nb">set </span><span class="nv">path</span><span class="o">=</span>%path%<span class="p">;</span>C:<span class="se">\n</span>odejs
<span class="c"># åˆ é™¤</span>
<span class="nb">set </span><span class="nv">NODE_ENV</span><span class="o">=</span>
</code></pre></div></div>

<p>Linux ä¸´æ—¶æ·»åŠ å‘½ä»¤å¦‚ä¸‹ï¼š</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># æŸ¥çœ‹</span>
<span class="nb">echo</span> <span class="nv">$NODE_ENV</span>
<span class="c"># æ·»åŠ </span>
<span class="nb">export </span><span class="nv">NODE_ENV</span><span class="o">=</span>production
<span class="c"># è¿½åŠ </span>
<span class="nb">export </span><span class="nv">path</span><span class="o">=</span><span class="nv">$path</span>:/usr/local/
<span class="c"># åˆ é™¤</span>
<span class="nb">unset </span>NODE_ENV
<span class="c"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</span>
<span class="nb">env</span>
</code></pre></div></div>

<p>æ°¸ä¹…ä¿å­˜ç¯å¢ƒå˜é‡åˆ™éœ€è¦ä¿®æ”¹ç³»ç»Ÿé…ç½®</p>

<ol>
  <li>Windows: å³é”®ï¼ˆæ­¤ç”µè„‘ï¼‰ -&gt; å±æ€§ -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -&gt; ç¯å¢ƒå˜é‡</li>
  <li>Linux: ç¼–è¾‘ç”¨æˆ·çš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œå¦‚ï¼š<code class="language-plaintext highlighter-rouge">.bashrc</code> <code class="language-plaintext highlighter-rouge">.bash_profile</code> <code class="language-plaintext highlighter-rouge">.zshrc</code></li>
</ol>

<p>åœ¨é¡¹ç›®ä¸Šç»å¸¸ä¼šåœ¨ package.json é‡Œé¢ç¼–è¾‘ï¼š</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webpack NODE_ENV=production"</span><span class="w">
    </span><span class="nl">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cross-env NODE_ENV=development"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://nodejs.org/dist/latest-v20.x/docs/api/process.html">Process | Node.js v20.11.0 Documentation</a></li>
  <li><a href="https://segmentfault.com/a/1190000011683741">node.js - Node ç¯å¢ƒå˜é‡ process.env çš„é‚£äº›äº‹å„¿</a></li>
</ul>]]></content><author><name></name></author><category term="2024" /><category term="nodejs" /><summary type="html"><![CDATA[åœ¨ nodejs å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ° process å˜é‡ï¼Œprocess æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè´Ÿè´£æä¾›ä¿¡æ¯ï¼Œä»¥åŠæ§åˆ¶å½“å‰ nodejs è¿›ç¨‹ã€‚]]></summary></entry><entry><title type="html">Vue çš„ä½¿ç”¨é—®é¢˜</title><link href="/blog/2024/01/14/vue%E7%9A%84%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98.html" rel="alternate" type="text/html" title="Vue çš„ä½¿ç”¨é—®é¢˜" /><published>2024-01-14T00:00:00+00:00</published><updated>2024-01-14T00:00:00+00:00</updated><id>/blog/2024/01/14/vue%E7%9A%84%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98</id><content type="html" xml:base="/blog/2024/01/14/vue%E7%9A%84%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98.html"><![CDATA[<p>åœ¨ä½¿ç”¨ Vue é‡åˆ°çš„éƒ¨åˆ†é—®é¢˜ã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#prettier">Prettier</a></li>
  <li><a href="#debug-in-vs-code">Debug in VS Code</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="prettier">Prettier</h2>

<p>åœ¨ä½¿ç”¨ Prettier æ ¼å¼åŒ–æ–‡ä»¶ï¼Œä¼šé‡åˆ°ç»“æŸæ ‡ç­¾ <code class="language-plaintext highlighter-rouge">&gt;</code> è·‘åˆ°ä¸‹ä¸€è¡Œçš„é—®é¢˜ã€‚</p>

<p>é€šè¿‡ä¿®æ”¹ .prettier çš„é…ç½®é¡¹ï¼š</p>

<p><code class="language-plaintext highlighter-rouge">htmlWhitespaceSensitivity: ignore</code></p>

<p>å‚è€ƒé“¾æ¥ï¼š</p>

<ul>
  <li><a href="https://prettier.io/docs/en/options#html-whitespace-sensitivity">HTML Whitespace Sensitivity</a></li>
  <li><a href="https://prettier.io/blog/2018/11/07/1.15.0#whitespace-sensitive-formatting">Prettier 1.15: HTML, Vue, Angular and MDX Support Â· Prettier</a></li>
</ul>

<h2 id="debug-in-vs-code">Debug in VS Code</h2>

<p>å…ˆé˜…è¯»å®˜æ–¹æ–‡æ¡£ <a href="https://v2.vuejs.org/v2/cookbook/debugging-in-vscode">Debugging in VS Code</a></p>

<p>å¤§è‡´æœ‰ä»¥ä¸‹å‡ ä¸ªç‚¹ï¼š</p>

<ol>
  <li>å¦‚æœæ˜¯ Firefoxï¼Œéœ€è¦å®‰è£…å¯¹åº”çš„æ’ä»¶ï¼ŒChrome å·²ç»å†…ç½®å¯¹åº”æ’ä»¶ï¼Œæ— éœ€å®‰è£…ã€‚</li>
  <li>
    <p>éœ€è¦ä¿®æ”¹ <code class="language-plaintext highlighter-rouge">vue.config.js</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">configureWebpack</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">devtool</span><span class="p">:</span> <span class="dl">'</span><span class="s1">source-map</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>å‚è€ƒæ–‡æ¡£ï¼š</p>

<ul>
  <li><a href="https://www.cnblogs.com/jasongrass/p/16438571.html">VSCode Vue è°ƒè¯• - J.æ™’å¤ªé˜³çš„çŒ« - åšå®¢å›­</a></li>
</ul>]]></content><author><name></name></author><category term="2023" /><category term="vue" /><summary type="html"><![CDATA[åœ¨ä½¿ç”¨ Vue é‡åˆ°çš„éƒ¨åˆ†é—®é¢˜ã€‚]]></summary></entry><entry><title type="html">Windows ä¸‹çš„è½¯ä»¶åŠè„šæœ¬</title><link href="/blog/2024/01/13/windows%E4%B8%8B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8F%8A%E8%84%9A%E6%9C%AC.html" rel="alternate" type="text/html" title="Windows ä¸‹çš„è½¯ä»¶åŠè„šæœ¬" /><published>2024-01-13T00:00:00+00:00</published><updated>2024-01-13T00:00:00+00:00</updated><id>/blog/2024/01/13/windows%E4%B8%8B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8F%8A%E8%84%9A%E6%9C%AC</id><content type="html" xml:base="/blog/2024/01/13/windows%E4%B8%8B%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8F%8A%E8%84%9A%E6%9C%AC.html"><![CDATA[<p>è®°å½•åœ¨ä½¿ç”¨ Windows ä¸‹çš„ä¸€äº›ä¼˜åŒ–è½¯ä»¶ä»¥åŠè„šæœ¬ã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#powertoys">PowerToys</a></li>
  <li><a href="#å°é¹¤åŒæ‹¼">å°é¹¤åŒæ‹¼</a></li>
  <li><a href="#å¾®è½¯æ‹¼éŸ³ç¦ç”¨è‹±æ–‡">å¾®è½¯æ‹¼éŸ³ç¦ç”¨è‹±æ–‡</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="powertoys">PowerToys</h2>

<p>é¦–å…ˆæ˜¯å¾®è½¯å®˜æ–¹å‡ºå“çš„ç³»ç»Ÿå·¥å…·è½¯ä»¶ - PowerToysã€‚</p>

<p>å¾ˆå¥½ç”¨çš„åŠŸèƒ½åŒ…æ‹¬é¢œè‰²é€‰å–å™¨ <code class="language-plaintext highlighter-rouge">Win + Shift + C</code>ï¼Œä»¥åŠæœ€å¸¸ç”¨çš„å¿«é€Ÿæœç´¢ PowerToys Run <code class="language-plaintext highlighter-rouge">Alt + Space</code></p>

<p>å¯ä»¥é€šè¿‡å¾®è½¯å•†åº—ï¼Œ<a href="https://github.com/microsoft/PowerToys">GitHub</a> ç­‰æ–¹å¼ä¸‹è½½ã€‚</p>

<h2 id="å°é¹¤åŒæ‹¼">å°é¹¤åŒæ‹¼</h2>

<p>æœ€å¾®è½¯è‡ªå¸¦çš„å¾®è½¯æ‹¼éŸ³è½¯ä»¶é‡Œé¢è™½åŒ…å«äº†åŒæ‹¼çš„è¾“å…¥æ³•ï¼Œä½†æ˜¯ç¼ºå°‘äº†å¸¸ç”¨çš„å°é¹¤åŒæ‹¼ã€‚</p>

<p>è¿è¡Œä»¥ä¸‹æ³¨å†Œè¡¨çš„è„šæœ¬å°±å¯ä»¥æ·»åŠ åˆ°å¾®è½¯æ‹¼éŸ³é‡Œé¢</p>

<pre><code class="language-reg">Windows Registry Editor Version 5.00

; ä¸ºå¾®è½¯æ‹¼éŸ³è¾“å…¥æ³•æ·»åŠ å°é¹¤åŒæ‹¼
[HKEY_CURRENT_USER\Software\Microsoft\InputMethod\Settings\CHS]
"UserDefinedDoublePinyinScheme0"="å°é¹¤åŒæ‹¼*2*^*iuvdjhcwfg^xmlnpbksqszxkrltvyovt"
</code></pre>

<h2 id="å¾®è½¯æ‹¼éŸ³ç¦ç”¨è‹±æ–‡">å¾®è½¯æ‹¼éŸ³ç¦ç”¨è‹±æ–‡</h2>

<p>å‡ºäºéƒ¨åˆ†éœ€æ±‚ï¼Œç°æœ‰çš„è¯­è¨€å®‰è£…äº†è‹±è¯­ï¼Œæ‰€ä»¥éœ€è¦å…³é—­å¾®è½¯æ‹¼éŸ³çš„è‹±æ–‡è¾“å…¥æ¨¡å¼ã€‚</p>

<p>åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›ç›¸å…³çš„åŠæ³•: ä½¿ç”¨ <a href="https://www.autohotkey.com/v2/">AutoHotKey</a> è„šæœ¬å®ç°åˆ‡æ¢æ£€æµ‹åˆ°åˆ‡æ¢çš„è‹±æ–‡æ¨¡å¼å°±å¸®å¿™åˆ‡æ¢åˆ°ä¸­æ–‡æ¨¡å¼ã€‚</p>

<ol>
  <li>
    <p>é¦–å…ˆè¿›è¡Œ AHK è½¯ä»¶çš„å®‰è£…ï¼Œå¹¶å°†ä¹‹åè¦è¿è¡Œçš„è„šæœ¬æ”¾å…¥ Windows å¼€æœºè‡ªå¯ç›®å½• <code class="language-plaintext highlighter-rouge">C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp</code>ã€‚</p>
  </li>
  <li>
    <p>æ‰¾åˆ°åˆ«äººå†™çš„è„šæœ¬ã€‚<a href="https://gist.github.com/maokwen/4d99f5c0aa2e7c0c114c708b03fb73ae">AutoHotKey-Switch-IME</a></p>

    <pre><code class="language-ahk">#Include %A_ScriptDir%

timeInterval := 500

InChs() {
  ime_status := DllCall("GetKeyboardLayout", "int", 0, "UInt")
  return (ime_status &amp; 0xffff) = 0x804 ; LANGID(Chinese) = 0x804
}

SwitchImeState(id) {
    SendMessage(0x283, ; WM_IME_CONTROL
                0x002, ; wParam IMC_SETCONVERSIONMODE
                1025,  ; lParam (Chinese)
                ,      ; Control (Window)
                id)
}

DetectHiddenWindows True

outer:
Loop {
  try {
    hWnd := WinGetID("A")
    id := DllCall("imm32\ImmGetDefaultIMEWnd", "Uint", hWnd, "Uint")

    if (InChs()) {
      SwitchImeState(id)
    }

} catch as e {
  ; ^Esc å¼€å§‹èœå•å¼¹çª—ï¼Œä¼šå¡æ­»åœ¨æ‰¾ä¸åˆ°å½“å‰çª—å£
  continue("outer")
}

Sleep(500)
}
</code></pre>
  </li>
  <li>
    <p>å¿«æ·é”®çš„åˆ‡æ¢ã€‚é»˜è®¤æ˜¯ <code class="language-plaintext highlighter-rouge">Win + Space</code>ï¼Œä½¿ç”¨å¾ˆä¸ä¹ æƒ¯ï¼Œä¿®æ”¹ç§°å¸¸ç”¨çš„ <code class="language-plaintext highlighter-rouge">Ctrl + Space</code>ã€‚</p>
    <ol>
      <li>ä½¿ç”¨ PowerToys çš„å¿«æ·é”®æ˜ å°„ã€‚ï¼ˆæœ€å¥½å¼€å¯ç®¡ç†å‘˜æƒé™ï¼‰</li>
      <li>ä½¿ç”¨ AHK è„šæœ¬ï¼Œå¯ä»¥åˆå¹¶åˆ°ä¸Šé¢çš„è„šæœ¬ã€‚ <code class="language-plaintext highlighter-rouge">^Space::#Space</code></li>
    </ol>
  </li>
</ol>]]></content><author><name></name></author><category term="2024" /><category term="windows" /><summary type="html"><![CDATA[è®°å½•åœ¨ä½¿ç”¨ Windows ä¸‹çš„ä¸€äº›ä¼˜åŒ–è½¯ä»¶ä»¥åŠè„šæœ¬ã€‚]]></summary></entry><entry><title type="html">è‡ªå®šä¹‰ Hooks</title><link href="/blog/2023/11/01/%E8%87%AA%E5%AE%9A%E4%B9%89hooks.html" rel="alternate" type="text/html" title="è‡ªå®šä¹‰ Hooks" /><published>2023-11-01T00:00:00+00:00</published><updated>2023-11-01T00:00:00+00:00</updated><id>/blog/2023/11/01/%E8%87%AA%E5%AE%9A%E4%B9%89hooks</id><content type="html" xml:base="/blog/2023/11/01/%E8%87%AA%E5%AE%9A%E4%B9%89hooks.html"><![CDATA[<p>è‡ªå®šä¹‰ Hooks æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ use å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksã€‚é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚</p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#ç»„ä»¶é—´å…±äº«é€»è¾‘">ç»„ä»¶é—´å…±äº«é€»è¾‘</a></li>
  <li><a href="#ä½•æ—¶è‡ªå®šä¹‰-hooks">ä½•æ—¶è‡ªå®šä¹‰ Hooks</a></li>
  <li><a href="#è‡ªå®šä¹‰-hooks-ä¸æ™®é€šå‡½æ•°åŒºåˆ«">è‡ªå®šä¹‰ Hooks ä¸æ™®é€šå‡½æ•°åŒºåˆ«</a></li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="ç»„ä»¶é—´å…±äº«é€»è¾‘">ç»„ä»¶é—´å…±äº«é€»è¾‘</h2>

<p>ä½¿ç”¨è‡ªå®šä¹‰ Hooks æœ€å¤§ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¯ä»¥å…±äº«ç»„ä»¶ä¹‹é—´çš„é€»è¾‘ã€‚</p>

<p>ä»¥ <a href="https://github.com/streamich/react-use">react-use</a> é‡Œé¢çš„ <code class="language-plaintext highlighter-rouge">useLocalStorage</code> ä½œä¸ºä¾‹å­ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">useLocalStorage</code> é‡Œé¢å°è£…ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…æ‹¬å¯¹å¼‚å¸¸å¤„ç†ï¼Œè¯»å–ï¼Œæ›´æ–°ä»¥åŠåˆ é™¤ç­‰æ“ä½œã€‚è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å°±å¯ä»¥ä¸ç”¨é‡å¤ç¼–ç ã€‚</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useLocalStorage</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-use</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">Demo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">setValue</span><span class="p">,</span> <span class="nx">remove</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useLocalStorage</span><span class="p">(</span><span class="dl">'</span><span class="s1">my-key</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">);</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Value: <span class="si">{</span><span class="nx">value</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>bar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="dl">'</span><span class="s1">baz</span><span class="dl">'</span><span class="p">)</span><span class="si">}</span><span class="p">&gt;</span>baz<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="nf">remove</span><span class="p">()</span><span class="si">}</span><span class="p">&gt;</span>Remove<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="ä½•æ—¶è‡ªå®šä¹‰-hooks">ä½•æ—¶è‡ªå®šä¹‰ Hooks</h2>

<p>hook æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹äºå¸¸ç”¨çš„ç»„ä»¶ä¼šç»å¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™æŠ½å– Hooksï¼Ÿä»€ä¹ˆæ—¶å€™æŠ½å– utilsï¼Ÿ</p>

<p>æ¥è‡ª React å®˜æ–¹æ–‡æ¡£ä¸€ä¸ªå¾ˆç®€æ˜“çš„æ ‡å‡†ï¼Œå°±æ˜¯å¦‚æœä½ çš„å‡½æ•°è°ƒç”¨äº†å…¶ä»– Hooksï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æ˜¯ä¸€ä¸ªä»¥ <code class="language-plaintext highlighter-rouge">use</code> å¼€å¤´çš„ Hooksã€‚</p>

<p>ä¸€ä¸ªåº”è¯¥æ”¾åœ¨ utils ä¸‹çš„æ™®é€šå‡½æ•°ï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ğŸ”´ Avoid: A Hook that doesn't use Hooks</span>
<span class="kd">function</span> <span class="nf">useSorted</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nf">slice</span><span class="p">().</span><span class="nf">sort</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// âœ… Good: A regular function that doesn't use Hooks</span>
<span class="kd">function</span> <span class="nf">getSorted</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nf">slice</span><span class="p">().</span><span class="nf">sort</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>è€Œä¸€ä¸ªç†åº”å‘½å use çš„ Hook:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âœ… Good: A Hook that uses other Hooks</span>
<span class="kd">function</span> <span class="nf">useAuth</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nf">useContext</span><span class="p">(</span><span class="nx">Auth</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="è‡ªå®šä¹‰-hooks-ä¸æ™®é€šå‡½æ•°åŒºåˆ«">è‡ªå®šä¹‰ Hooks ä¸æ™®é€šå‡½æ•°åŒºåˆ«</h2>

<p>æ ¹æ®ä¸Šé¢çš„å†…å®¹ï¼Œå¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼š</p>

<ol>
  <li>Hooks å†™åœ¨ç»„ä»¶é¡¶éƒ¨ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ï¼Œæ™®é€šå‡½æ•°éœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</li>
  <li>Hooks åªèƒ½åœ¨ React ç»„ä»¶é‡Œé¢ä½¿ç”¨ï¼Œæ™®é€šå‡½æ•°å¯ä»¥åœ¨å…¶ä»–æ™®é€šå‡½æ•°é‡Œé¢è°ƒç”¨ã€‚</li>
  <li>Hooks ä¸­å¯ä»¥è°ƒç”¨å…¶ä»– hookï¼Œå¦‚ useEffect, useStateï¼Œæ™®é€šå‡½æ•°ä¸å¯ä»¥å¤„ç† Hooks é€»è¾‘ã€‚</li>
  <li>Hooks çº¦å®šä½¿ç”¨ use å¼€å¤´å‘½åï¼Œä½¿ç”¨ use å¼€å¤´å¯ä»¥è®© React è¯†åˆ«å‡º hookï¼Œä»è€Œæ£€æŸ¥ Hooks çš„è§„åˆ™çº¦æŸã€‚</li>
</ol>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://www.jianshu.com/p/cc58fc005070">react hook â€“ è‡ªå®šä¹‰ Hook</a></li>
  <li><a href="https://stackoverflow.com/questions/60133412/react-custom-hooks-vs-normal-functions-what-is-the-difference">reactjs - react custom hooks vs normal functions, what is the difference - Stack Overflow</a></li>
  <li><a href="https://www.zhihu.com/question/491311403">è‡ªå®šä¹‰ hooks å’Œæ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - çŸ¥ä¹</a></li>
  <li><a href="https://react.dev/learn/reusing-logic-with-custom-hooks">react.dev/learn/reusing-logic-with-custom-hooks</a></li>
  <li><a href="https://github.com/streamich/react-use">streamich/react-use: React Hooks â€” ğŸ‘</a></li>
</ul>]]></content><author><name></name></author><category term="2023" /><category term="react" /><summary type="html"><![CDATA[è‡ªå®šä¹‰ Hooks æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ use å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»– Hooksã€‚é€šè¿‡è‡ªå®šä¹‰ Hooksï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚]]></summary></entry><entry><title type="html">React çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</title><link href="/blog/2023/10/25/react%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95.html" rel="alternate" type="text/html" title="React çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•" /><published>2023-10-25T00:00:00+00:00</published><updated>2023-10-25T00:00:00+00:00</updated><id>/blog/2023/10/25/react%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95</id><content type="html" xml:base="/blog/2023/10/25/react%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95.html"><![CDATA[<p>åœ¨ React ä¸­ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨ props å›è°ƒå³å¯ã€‚ä½†æ˜¯å¦‚æœéœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ï¼Ÿ</p>

<p><strong>å…¶å®æ ¸å¿ƒæ€æƒ³å°±æ˜¯é€šè¿‡ <code class="language-plaintext highlighter-rouge">ref</code> æ¥è·å–å­ç»„ä»¶çš„å®ä¾‹/æ–¹æ³•ã€‚</strong></p>

<!-- vim-markdown-toc GFM -->

<ul>
  <li><a href="#ç±»ç»„ä»¶">ç±»ç»„ä»¶</a></li>
  <li><a href="#å‡½æ•°ç»„ä»¶">å‡½æ•°ç»„ä»¶</a></li>
  <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  <li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a></li>
</ul>

<!-- vim-markdown-toc -->

<h2 id="ç±»ç»„ä»¶">ç±»ç»„ä»¶</h2>

<p>ç±»ç»„ä»¶å¯ä»¥é€šè¿‡ ref è·å–å­ç»„ä»¶çš„å®ä¾‹ï¼Œä»è€Œè°ƒç”¨å®ä¾‹çš„æ–¹æ³•ã€‚</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Sub</span> <span class="kd">extends</span> <span class="nc">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">func</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">sub function</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>Hello from Sub<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">App</span> <span class="kd">extends</span> <span class="nc">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ref</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nf">createRef</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">handleBtnClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nf">func</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return </span><span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"App"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">Sub</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">ref</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleBtnClick</span><span class="si">}</span><span class="p">&gt;</span>Click Me<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä»£ç ç¤ºä¾‹ï¼š<a href="https://codesandbox.io/s/class-wg76yp?file=/src/App.js">codesandbox</a></p>

<h2 id="å‡½æ•°ç»„ä»¶">å‡½æ•°ç»„ä»¶</h2>

<p>å‡½æ•°ç»„ä»¶å¯¹äº ref çš„å¤„ç†ï¼Œéœ€è¦ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">forwardRef</code> æ¥è¿›è¡Œ ref çš„è½¬å‘ã€‚ä½¿ç”¨ forwardRef éœ€è¦æŒ‡å®š ref çš„æŒ‡å‘ã€‚</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">forwardRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MyInput</span> <span class="o">=</span> <span class="nf">forwardRef</span><span class="p">(</span><span class="kd">function</span> <span class="nf">MyInput</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">ref</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">label</span><span class="p">,</span> <span class="p">...</span><span class="nx">otherProps</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">;</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">label</span><span class="si">}</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="si">{</span><span class="p">...</span><span class="nx">otherProps</span><span class="si">}</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>ä¸Šé¢æ˜¯æœ€å¸¸ç”¨çš„ ref ä½¿ç”¨æ–¹å¼ï¼ŒæŒ‡å‘ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œå¯ä»¥è·å– DOM å®ä¾‹ã€‚ä½†æ˜¯è¿™æ ·å­æ— æ³•è·å–å­ç»„ä»¶çš„æ–¹æ³•ã€‚</p>

<p>å¥½åœ¨ React æä¾›äº†å¯¼å‡ºå†…éƒ¨æ–¹æ³•çš„é’©å­ <code class="language-plaintext highlighter-rouge">useImperativeHandle</code></p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">MyInput</span> <span class="o">=</span> <span class="nf">forwardRef</span><span class="p">(</span><span class="kd">function</span> <span class="nf">MyInput</span><span class="p">(</span><span class="nx">props</span><span class="p">,</span> <span class="nx">ref</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">inputRef</span> <span class="o">=</span> <span class="nf">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nf">useImperativeHandle</span><span class="p">(</span>
    <span class="nx">ref</span><span class="p">,</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nf">focus</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nf">focus</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nf">scrollIntoView</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">inputRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nf">scrollIntoView</span><span class="p">();</span>
        <span class="p">},</span>
      <span class="p">};</span>
    <span class="p">},</span>
    <span class="p">[],</span>
  <span class="p">);</span>

  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">input</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">inputRef</span><span class="si">}</span> <span class="p">/&gt;;</span>
<span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Form</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">ref</span> <span class="o">=</span> <span class="nf">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nf">handleClick</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ref</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nf">focus</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">MyInput</span> <span class="na">placeholder</span><span class="p">=</span><span class="s">"Enter your name"</span> <span class="na">ref</span><span class="p">=</span><span class="si">{</span><span class="nx">ref</span><span class="si">}</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="p">=</span><span class="s">"button"</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">handleClick</span><span class="si">}</span><span class="p">&gt;</span>
        Edit
      <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä»£ç å®ä¾‹ï¼š<a href="https://codesandbox.io/s/admiring-vaughan-hqsjww">codesandbox</a></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>React çˆ¶ç»„ä»¶æƒ³è¦è·å–å­ç»„ä»¶çš„å®ä¾‹æ–¹æ³•ï¼Œå¿…é¡»é€šè¿‡ ref æ¥è·å–ã€‚è€Œåœ¨ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ä¸Šæœ‰éƒ¨åˆ†åŒºåˆ«ã€‚</p>

<ul>
  <li>ç±»ç»„ä»¶å¯ä»¥ç›´æ¥é€šè¿‡ createRef åˆ›å»º ref æŒ‡å‘å­ç»„ä»¶å®ä¾‹ï¼Œä»è€Œè°ƒç”¨å­ç»„ä»¶å†…éƒ¨çš„æ–¹æ³•ã€‚</li>
  <li>å‡½æ•°ç»„ä»¶åˆ™éœ€è¦ä½¿ç”¨ useImperativeHandle æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•ã€‚</li>
</ul>

<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>

<ul>
  <li><a href="https://react.dev/reference/react/forwardRef">forwardRef - React</a></li>
  <li><a href="https://react.dev/reference/react/useImperativeHandle">useImperativeHandle - React</a></li>
</ul>]]></content><author><name></name></author><category term="2023" /><category term="react" /><summary type="html"><![CDATA[åœ¨ React ä¸­ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨ props å›è°ƒå³å¯ã€‚ä½†æ˜¯å¦‚æœéœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ï¼Ÿ]]></summary></entry></feed>